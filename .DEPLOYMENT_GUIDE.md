# üöÄ Live Deployment —Å –ü–æ–¥–¥–æ–º–µ–Ω–∞–º–∏ - –ü–æ–ª–Ω–æ–µ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üìã –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É, –≥–¥–µ –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–∞–π—Ç–∞ –ø–æ–ª—É—á–∞–µ—Ç:
- –°–≤–æ–π –∂–∏–≤–æ–π —Å–∞–π—Ç –Ω–∞ –ø–æ–¥–¥–æ–º–µ–Ω–µ: `username.monochrome.ai`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π deployment
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (HTTPS)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å custom domain

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```
Frontend (React)
    ‚Üì
localStorage (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
    ‚Üì
Vercel Static Hosting
```

### –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
Frontend (React)           Backend (Node.js/Express)        Infrastructure
    ‚Üì                              ‚Üì                              ‚Üì
API Calls                    PostgreSQL Database          DNS Management (Cloudflare)
    ‚Üì                              ‚Üì                              ‚Üì
User creates site    ‚Üí    Save to DB + Generate         ‚Üí  Create subdomain
    ‚Üì                         subdomain slug                      ‚Üì
Auto deployment      ‚Üê    Trigger deployment           ‚Üê   SSL Certificate
    ‚Üì
username.monochrome.ai (LIVE!)
```

---

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. Backend Server (Node.js + Express)

**–ó–∞–¥–∞—á–∏:**
- User authentication (JWT)
- Site CRUD operations
- Subdomain management
- Deployment triggers
- Database operations

**–§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
backend/
‚îú‚îÄ‚îÄ server.js                 # Express server
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ auth.js              # Login, signup, JWT
‚îÇ   ‚îú‚îÄ‚îÄ sites.js             # Site CRUD
‚îÇ   ‚îî‚îÄ‚îÄ domains.js           # Subdomain management
‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îú‚îÄ‚îÄ siteController.js
‚îÇ   ‚îî‚îÄ‚îÄ domainController.js
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ User.js
‚îÇ   ‚îî‚îÄ‚îÄ Site.js
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ auth.js              # JWT verification
‚îÇ   ‚îî‚îÄ‚îÄ validation.js
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ deploymentService.js  # Vercel/Netlify API
‚îÇ   ‚îî‚îÄ‚îÄ dnsService.js         # Cloudflare API
‚îî‚îÄ‚îÄ config/
    ‚îú‚îÄ‚îÄ database.js
    ‚îî‚îÄ‚îÄ env.js
```

### 2. Database Schema (PostgreSQL)

```sql
-- Users table
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    username VARCHAR(50) UNIQUE NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Sites table
CREATE TABLE sites (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    name VARCHAR(255) NOT NULL,
    slug VARCHAR(100) UNIQUE NOT NULL,  -- –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–∞
    subdomain VARCHAR(100) UNIQUE,      -- username.monochrome.ai
    custom_domain VARCHAR(255),         -- –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

    -- Site data (JSON)
    hero JSONB,
    services JSONB,
    contacts JSONB,
    social JSONB,
    stats JSONB,
    testimonials JSONB,
    portfolio JSONB,

    -- Design settings
    design JSONB,  -- { colorScheme, activeLanding }

    -- SEO data
    seo JSONB,

    -- Status
    status VARCHAR(20) DEFAULT 'draft',  -- draft, published, archived
    deployment_status VARCHAR(20),       -- deploying, deployed, failed
    deployment_url TEXT,

    -- Timestamps
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    published_at TIMESTAMP
);

-- Chat messages table
CREATE TABLE chat_messages (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    site_id UUID REFERENCES sites(id) ON DELETE CASCADE,
    role VARCHAR(20) NOT NULL,  -- user, assistant
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Subscriptions table (–¥–ª—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏)
CREATE TABLE subscriptions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    plan VARCHAR(50) NOT NULL,  -- free, pro, enterprise
    status VARCHAR(20) NOT NULL,  -- active, cancelled, expired
    started_at TIMESTAMP DEFAULT NOW(),
    expires_at TIMESTAMP,
    stripe_subscription_id VARCHAR(255)
);

-- Domains table (–¥–ª—è custom domains)
CREATE TABLE domains (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    site_id UUID REFERENCES sites(id) ON DELETE CASCADE,
    domain VARCHAR(255) UNIQUE NOT NULL,
    dns_verified BOOLEAN DEFAULT FALSE,
    ssl_status VARCHAR(20),  -- pending, issued, failed
    created_at TIMESTAMP DEFAULT NOW()
);

-- Analytics table
CREATE TABLE analytics (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    site_id UUID REFERENCES sites(id) ON DELETE CASCADE,
    event_type VARCHAR(50),  -- page_view, chat_message, form_submit
    metadata JSONB,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Indexes –¥–ª—è performance
CREATE INDEX idx_sites_user_id ON sites(user_id);
CREATE INDEX idx_sites_subdomain ON sites(subdomain);
CREATE INDEX idx_sites_slug ON sites(slug);
CREATE INDEX idx_chat_messages_site_id ON chat_messages(site_id);
CREATE INDEX idx_analytics_site_id ON analytics(site_id);
CREATE INDEX idx_analytics_created_at ON analytics(created_at);
```

### 3. DNS & Subdomain Management

**–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã:**
- **Cloudflare** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ SSL, API –¥–ª—è DNS
- **Route53** (AWS) - –ø–ª–∞—Ç–Ω–æ, –Ω–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AWS
- **Vercel Domains** - –ø—Ä–æ—Å—Ç–æ—Ç–∞, –Ω–æ –º–µ–Ω–µ–µ –≥–∏–±–∫–æ

**Cloudflare API Setup:**

```javascript
// backend/services/dnsService.js
const axios = require('axios');

const CLOUDFLARE_API_TOKEN = process.env.CLOUDFLARE_API_TOKEN;
const ZONE_ID = process.env.CLOUDFLARE_ZONE_ID;  // monochrome.ai zone

class DNSService {
  async createSubdomain(subdomain, targetIP) {
    try {
      const response = await axios.post(
        `https://api.cloudflare.com/client/v4/zones/${ZONE_ID}/dns_records`,
        {
          type: 'A',  // –∏–ª–∏ CNAME –¥–ª—è Vercel
          name: subdomain,  // username.monochrome.ai
          content: targetIP,  // –∏–ª–∏ vercel-alias.vercel.app
          ttl: 1,  // auto
          proxied: true  // Cloudflare proxy –¥–ª—è SSL
        },
        {
          headers: {
            'Authorization': `Bearer ${CLOUDFLARE_API_TOKEN}`,
            'Content-Type': 'application/json'
          }
        }
      );

      return {
        success: true,
        recordId: response.data.result.id,
        subdomain: `${subdomain}.monochrome.ai`
      };
    } catch (error) {
      console.error('Cloudflare DNS Error:', error.response?.data);
      throw new Error('Failed to create subdomain');
    }
  }

  async deleteSubdomain(recordId) {
    await axios.delete(
      `https://api.cloudflare.com/client/v4/zones/${ZONE_ID}/dns_records/${recordId}`,
      {
        headers: {
          'Authorization': `Bearer ${CLOUDFLARE_API_TOKEN}`
        }
      }
    );
  }

  async verifyDNS(subdomain) {
    const response = await axios.get(
      `https://api.cloudflare.com/client/v4/zones/${ZONE_ID}/dns_records`,
      {
        params: { name: `${subdomain}.monochrome.ai` },
        headers: {
          'Authorization': `Bearer ${CLOUDFLARE_API_TOKEN}`
        }
      }
    );

    return response.data.result.length > 0;
  }
}

module.exports = new DNSService();
```

### 4. Deployment Service (Vercel API)

**–î–≤–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:**

#### –°—Ç—Ä–∞—Ç–µ–≥–∏—è A: Static Site Generation (SSG)
–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∞–π—Ç–∞ —Å–æ–∑–¥–∞—ë–º –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π build

```javascript
// backend/services/deploymentService.js
const axios = require('axios');
const fs = require('fs').promises;
const path = require('path');

const VERCEL_TOKEN = process.env.VERCEL_TOKEN;
const VERCEL_TEAM_ID = process.env.VERCEL_TEAM_ID;

class DeploymentService {
  async deploySite(site) {
    const { slug, subdomain, data, design } = site;

    // 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π HTML –¥–ª—è —Å–∞–π—Ç–∞
    const siteHTML = await this.generateSiteHTML(data, design);

    // 2. –°–æ–∑–¥–∞—ë–º deployment –Ω–∞ Vercel
    const deployment = await axios.post(
      'https://api.vercel.com/v13/deployments',
      {
        name: slug,
        files: [
          {
            file: 'index.html',
            data: siteHTML
          },
          {
            file: 'vercel.json',
            data: JSON.stringify({
              routes: [{ src: '/(.*)', dest: '/index.html' }]
            })
          }
        ],
        projectSettings: {
          framework: null,
          buildCommand: null,
          outputDirectory: null
        },
        target: 'production'
      },
      {
        headers: {
          'Authorization': `Bearer ${VERCEL_TOKEN}`,
          'Content-Type': 'application/json'
        }
      }
    );

    // 3. –î–æ–±–∞–≤–ª—è–µ–º custom domain (subdomain)
    await this.addDomain(deployment.data.id, subdomain);

    return {
      deploymentId: deployment.data.id,
      url: deployment.data.url,
      subdomain: `${subdomain}.monochrome.ai`
    };
  }

  async addDomain(deploymentId, subdomain) {
    await axios.post(
      `https://api.vercel.com/v9/projects/${deploymentId}/domains`,
      { name: `${subdomain}.monochrome.ai` },
      {
        headers: {
          'Authorization': `Bearer ${VERCEL_TOKEN}`
        }
      }
    );
  }

  async generateSiteHTML(data, design) {
    // Server-side rendering React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    const React = require('react');
    const ReactDOMServer = require('react-dom/server');
    const { StaticRouter } = require('react-router-dom/server');

    // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
    const ChatPage = require('../../src/pages/ChatPage').default;
    const ClientSitePage = require('../../src/pages/ClientSitePage').default;

    const Component = design.activeLanding === 'main' ? ChatPage : ClientSitePage;

    const html = ReactDOMServer.renderToString(
      React.createElement(StaticRouter, { location: '/' },
        React.createElement(Component, { siteData: { data, design } })
      )
    );

    return `
      <!DOCTYPE html>
      <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>${data.hero?.companyName || 'Site'}</title>
        <link rel="stylesheet" href="https://cdn.tailwindcss.com">
        ${this.generateSEOTags(data.seo)}
      </head>
      <body>
        <div id="root">${html}</div>
        ${this.injectColorScheme(design.colorScheme)}
      </body>
      </html>
    `;
  }

  generateSEOTags(seo) {
    return `
      <meta name="description" content="${seo?.description || ''}">
      <meta name="keywords" content="${seo?.keywords || ''}">
      <meta name="author" content="${seo?.author || ''}">
    `;
  }

  injectColorScheme(colorScheme) {
    const { COLOR_SCHEMES } = require('../../src/utils/designStorage');
    const scheme = COLOR_SCHEMES[colorScheme] || COLOR_SCHEMES.default;

    return `
      <style>
        :root {
          --gradient-from: ${scheme.gradientFrom};
          --gradient-to: ${scheme.gradientTo};
          --primary: ${scheme.primary};
          --secondary: ${scheme.secondary};
        }
      </style>
    `;
  }
}

module.exports = new DeploymentService();
```

#### –°—Ç—Ä–∞—Ç–µ–≥–∏—è B: Multi-tenant Single App
–û–¥–Ω–æ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –≤—Å–µ –ø–æ–¥–¥–æ–º–µ–Ω—ã

```javascript
// –ë–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Ö–æ–¥ - –≤—Å–µ —Å–∞–π—Ç—ã –Ω–∞ –æ–¥–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
// subdomain –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ URL –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î

// App.jsx –Ω–∞ production
useEffect(() => {
  const subdomain = window.location.hostname.split('.')[0];

  if (subdomain && subdomain !== 'www' && subdomain !== 'monochrome') {
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∞–π—Ç –ø–æ –ø–æ–¥–¥–æ–º–µ–Ω—É
    fetch(`/api/sites/by-subdomain/${subdomain}`)
      .then(res => res.json())
      .then(site => {
        // –†–µ–Ω–¥–µ—Ä–∏–º —Å–∞–π—Ç
        setSiteData(site);
      });
  }
}, []);
```

### 5. Frontend Integration

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:**

```javascript
// src/api/backend.js
import axios from 'axios';

const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';

export const api = axios.create({
  baseURL: API_URL,
  headers: {
    'Content-Type': 'application/json'
  }
});

// Interceptor –¥–ª—è JWT
api.interceptors.request.use(config => {
  const token = localStorage.getItem('auth_token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// API methods
export const sitesAPI = {
  create: (data) => api.post('/sites', data),
  update: (id, data) => api.put(`/sites/${id}`, data),
  delete: (id) => api.delete(`/sites/${id}`),
  getAll: () => api.get('/sites'),
  getById: (id) => api.get(`/sites/${id}`),
  publish: (id) => api.post(`/sites/${id}/publish`)
};

export const authAPI = {
  login: (credentials) => api.post('/auth/login', credentials),
  signup: (data) => api.post('/auth/signup', data),
  logout: () => api.post('/auth/logout')
};
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ QuickEdit.jsx:**

```javascript
// –í–º–µ—Å—Ç–æ localStorage - API calls
import { sitesAPI } from '../../api/backend';

const handleSave = async () => {
  try {
    setSaving(true);

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
    await sitesAPI.update(currentSite.id, {
      data: siteData,
      design: designSettings,
      seo: seoData
    });

    setSaved(true);
    setTimeout(() => setSaved(false), 2000);
  } catch (error) {
    console.error('Save error:', error);
    alert('Failed to save changes');
  } finally {
    setSaving(false);
  }
};

const handlePublish = async () => {
  try {
    setPublishing(true);

    // –ü—É–±–ª–∏–∫—É–µ–º —Å–∞–π—Ç
    const response = await sitesAPI.publish(currentSite.id);

    // –ü–æ–ª—É—á–∞–µ–º URL –ø–æ–¥–¥–æ–º–µ–Ω–∞
    const { subdomain, deploymentUrl } = response.data;

    alert(`Site published! Visit: ${subdomain}.monochrome.ai`);

    // –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
    window.open(`https://${subdomain}.monochrome.ai`, '_blank');
  } catch (error) {
    console.error('Publish error:', error);
    alert('Failed to publish site');
  } finally {
    setPublishing(false);
  }
};
```

---

## üîê –ü–æ—à–∞–≥–æ–≤—ã–π Workflow

### –®–∞–≥ 1: User —Å–æ–∑–¥–∞—ë—Ç –∞–∫–∫–∞—É–Ω—Ç

```javascript
// POST /api/auth/signup
{
  "email": "user@example.com",
  "password": "SecurePass123",
  "username": "johndoe"  // —Å—Ç–∞–Ω–µ—Ç –ø–æ–¥–¥–æ–º–µ–Ω–æ–º
}

// Response:
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": "uuid",
    "email": "user@example.com",
    "username": "johndoe"
  }
}
```

### –®–∞–≥ 2: User —Å–æ–∑–¥–∞—ë—Ç —Å–∞–π—Ç —á–µ—Ä–µ–∑ AI Wizard / Manual

```javascript
// Frontend —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
const siteData = {
  name: "My IT Company",
  slug: "my-it-company",  // auto-generated from name
  hero: { /* ... */ },
  services: { /* ... */ },
  contacts: { /* ... */ },
  design: { colorScheme: 'purple', activeLanding: 'client' }
};

// POST /api/sites
await sitesAPI.create(siteData);
```

### –®–∞–≥ 3: Backend —Å–æ–∑–¥–∞—ë—Ç —Å–∞–π—Ç –≤ –ë–î

```javascript
// Backend: routes/sites.js
router.post('/', authMiddleware, async (req, res) => {
  const { name, slug, hero, services, contacts, social, design } = req.body;
  const userId = req.user.id;

  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π slug
  const uniqueSlug = await generateUniqueSlug(slug);

  // –°–æ–∑–¥–∞—ë–º –∑–∞–ø–∏—Å—å –≤ –ë–î
  const site = await Site.create({
    user_id: userId,
    name,
    slug: uniqueSlug,
    subdomain: uniqueSlug,  // johndoe-it-company
    hero,
    services,
    contacts,
    social,
    design,
    status: 'draft'
  });

  res.json({ site });
});
```

### –®–∞–≥ 4: User –Ω–∞–∂–∏–º–∞–µ—Ç "Publish"

```javascript
// POST /api/sites/:id/publish
router.post('/:id/publish', authMiddleware, async (req, res) => {
  const site = await Site.findByPk(req.params.id);

  // 1. –°–æ–∑–¥–∞—ë–º DNS –∑–∞–ø–∏—Å—å
  const dnsResult = await dnsService.createSubdomain(
    site.subdomain,
    'vercel-deployment-ip-or-cname'
  );

  // 2. Deploy –Ω–∞ Vercel
  const deployment = await deploymentService.deploySite(site);

  // 3. –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –≤ –ë–î
  await site.update({
    status: 'published',
    deployment_status: 'deployed',
    deployment_url: deployment.url,
    published_at: new Date()
  });

  res.json({
    success: true,
    subdomain: `${site.subdomain}.monochrome.ai`,
    deploymentUrl: deployment.url
  });
});
```

### –®–∞–≥ 5: DNS propagation (1-5 –º–∏–Ω—É—Ç)

```
Cloudflare —Å–æ–∑–¥–∞—ë—Ç DNS –∑–∞–ø–∏—Å—å:
johndoe-it-company.monochrome.ai ‚Üí Vercel IP

Vercel –≤—ã–¥–∞—ë—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

–°–∞–π—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS!
```

### –®–∞–≥ 6: User –ø–æ—Å–µ—â–∞–µ—Ç —Å–≤–æ–π —Å–∞–π—Ç

```
https://johndoe-it-company.monochrome.ai
    ‚Üì
Vercel –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
    ‚Üì
–û—Ç–¥–∞—ë—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π HTML –∏–ª–∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç React
    ‚Üì
Chatbot –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å DeepSeek API
```

---

## üõ†Ô∏è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ & DevOps

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã

| –°–µ—Ä–≤–∏—Å | –¶–µ–ª—å | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|--------|------|-----------|
| **Vercel Pro** | Hosting + Deployments | $20/–º–µ—Å |
| **PostgreSQL** (Supabase/Railway) | Database | $0-25/–º–µ—Å |
| **Cloudflare** | DNS + SSL | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ |
| **Domain** (monochrome.ai) | Main domain | $12/–≥–æ–¥ |
| **Redis** (Upstash) | Cache & Sessions | $0-10/–º–µ—Å |
| **Sentry** | Error tracking | $0-26/–º–µ—Å |

**–ò—Ç–æ–≥–æ:** ~$30-80/–º–µ—Å –¥–ª—è —Å—Ç–∞—Ä—Ç–∞

### Environment Variables

```env
# Backend (.env)
NODE_ENV=production
PORT=5000

# Database
DATABASE_URL=postgresql://user:pass@host:5432/monochrome

# JWT
JWT_SECRET=your-secret-key-here
JWT_EXPIRES_IN=7d

# Cloudflare
CLOUDFLARE_API_TOKEN=your-cloudflare-token
CLOUDFLARE_ZONE_ID=your-zone-id

# Vercel
VERCEL_TOKEN=your-vercel-token
VERCEL_TEAM_ID=your-team-id

# DeepSeek
DEEPSEEK_API_KEY=sk-***

# Redis
REDIS_URL=redis://localhost:6379

# Frontend URL
FRONTEND_URL=https://monochrome.ai
```

### Docker Setup

```dockerfile
# backend/Dockerfile
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

EXPOSE 5000

CMD ["node", "server.js"]
```

```yaml
# docker-compose.yml
version: '3.8'

services:
  backend:
    build: ./backend
    ports:
      - "5000:5000"
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - JWT_SECRET=${JWT_SECRET}
    depends_on:
      - postgres
      - redis

  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: monochrome
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: secure_password
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  redis_data:
```

---

## üìä Monitoring & Analytics

### Tracking –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∞–π—Ç–∞

```javascript
// –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤ –∫–∞–∂–¥—ã–π deployed site
<script>
  // Simple analytics
  fetch('/api/analytics', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      siteId: '${site.id}',
      event: 'page_view',
      metadata: {
        url: window.location.href,
        referrer: document.referrer,
        userAgent: navigator.userAgent
      }
    })
  });
</script>
```

### Dashboard Metrics

```sql
-- –¢–æ–ø —Å–∞–π—Ç—ã –ø–æ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
SELECT
  s.name,
  s.subdomain,
  COUNT(a.id) as views,
  COUNT(DISTINCT a.session_id) as unique_visitors
FROM sites s
LEFT JOIN analytics a ON s.id = a.site_id
WHERE a.created_at > NOW() - INTERVAL '30 days'
GROUP BY s.id
ORDER BY views DESC
LIMIT 10;
```

---

## üí∞ –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è

### Subscription Plans

```javascript
const PLANS = {
  FREE: {
    price: 0,
    sites: 1,
    customDomain: false,
    analytics: false,
    aiSuggestions: 10 // per month
  },
  PRO: {
    price: 29,
    sites: 10,
    customDomain: true,
    analytics: true,
    aiSuggestions: 1000
  },
  ENTERPRISE: {
    price: 99,
    sites: -1, // unlimited
    customDomain: true,
    analytics: true,
    aiSuggestions: -1,
    whiteLabel: true
  }
};
```

### Stripe Integration

```javascript
// routes/subscriptions.js
const stripe = require('stripe')(process.env.STRIPE_SECRET_KEY);

router.post('/create-checkout-session', authMiddleware, async (req, res) => {
  const { plan } = req.body;

  const session = await stripe.checkout.sessions.create({
    payment_method_types: ['card'],
    line_items: [{
      price_data: {
        currency: 'usd',
        product_data: {
          name: `Monochrome ${plan} Plan`,
        },
        unit_amount: PLANS[plan].price * 100,
        recurring: { interval: 'month' }
      },
      quantity: 1,
    }],
    mode: 'subscription',
    success_url: `${FRONTEND_URL}/dashboard?success=true`,
    cancel_url: `${FRONTEND_URL}/pricing?cancelled=true`,
    customer_email: req.user.email
  });

  res.json({ sessionId: session.id });
});
```

---

## üöÄ Deployment Checklist

### Pre-Launch

- [ ] –ö—É–ø–∏—Ç—å –¥–æ–º–µ–Ω `monochrome.ai`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Cloudflare DNS
- [ ] –°–æ–∑–¥–∞—Ç—å Vercel account (Pro plan)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL database
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Redis cache
- [ ] –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å JWT secret
- [ ] –ü–æ–ª—É—á–∏—Ç—å DeepSeek API key
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Sentry error tracking

### Backend Deploy

- [ ] Deploy backend –Ω–∞ Railway/Render/Heroku
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å environment variables
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å database migrations
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API endpoints
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –¥–ª—è frontend

### Frontend Deploy

- [ ] Build React app
- [ ] Deploy –Ω–∞ Vercel
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å environment variables
- [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å custom domain
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSL certificate

### DNS Configuration

- [ ] Cloudflare nameservers –Ω–∞ domain
- [ ] –°–æ–∑–¥–∞—Ç—å A record –¥–ª—è `@` –∏ `www`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å wildcard `*.monochrome.ai`
- [ ] –í–∫–ª—é—á–∏—Ç—å SSL/TLS (Full)
- [ ] –í–∫–ª—é—á–∏—Ç—å Always Use HTTPS

### Testing

- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∞–π—Ç
- [ ] –ù–∞–∂–∞—Ç—å Publish
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–æ–º–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSL certificate
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å chatbot —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å analytics tracking

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### API Documentation

- **Vercel API:** https://vercel.com/docs/rest-api
- **Cloudflare API:** https://developers.cloudflare.com/api/
- **Stripe API:** https://stripe.com/docs/api

### Tutorials

- **DNS Management:** https://www.cloudflare.com/learning/dns/what-is-dns/
- **Multi-tenancy:** https://www.postgresql.org/docs/current/ddl-rowsecurity.html
- **JWT Auth:** https://jwt.io/introduction

---

## üéØ Roadmap Implementation

### Phase 1: MVP (2-3 –º–µ—Å—è—Ü–∞)
- ‚úÖ Backend API (Express + PostgreSQL)
- ‚úÖ User authentication
- ‚úÖ Site CRUD operations
- ‚úÖ Basic subdomain creation (manual)
- ‚úÖ Static site deployment

### Phase 2: Automation (1-2 –º–µ—Å—è—Ü–∞)
- ‚úÖ Auto subdomain creation
- ‚úÖ Auto SSL certificates
- ‚úÖ One-click publish
- ‚úÖ Analytics tracking

### Phase 3: Advanced Features (2-3 –º–µ—Å—è—Ü–∞)
- ‚úÖ Custom domain support
- ‚úÖ Stripe integration
- ‚úÖ Advanced analytics dashboard
- ‚úÖ A/B testing

### Phase 4: Scale (ongoing)
- ‚úÖ CDN optimization
- ‚úÖ Load balancing
- ‚úÖ Database sharding
- ‚úÖ White-label solution

---

**–ò—Ç–æ–≥–æ:** –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ live deployment —Å –ø–æ–¥–¥–æ–º–µ–Ω–∞–º–∏ —Ç—Ä–µ–±—É–µ—Ç:
- Backend infrastructure
- Database setup
- DNS management
- Deployment automation
- Monitoring & analytics

**–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞:** ~$30-80/–º–µ—Å—è—Ü
**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ MVP:** 2-3 –º–µ—Å—è—Ü–∞
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è-–í—ã—Å–æ–∫–∞—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç `username.monochrome.ai` —Å–∞–π—Ç —Å HTTPS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏! üöÄ
